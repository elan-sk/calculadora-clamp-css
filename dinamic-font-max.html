<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Generador clamp() proporcional</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="card">
    <h2>ğŸ§® Generador proporcional clamp()</h2>
    <input id="desktop" type="number"
      placeholder="TamaÃ±o de fuente en desktop (px)" />
    <div>
      <button onclick="generate()">ğŸš€ Generar cÃ³digo</button>
      <button class="secondary" onclick="changeProportion()">âš™ï¸ Cambiar
        proporciÃ³n</button>
    </div>
    <pre id="result">AquÃ­ aparecerÃ¡ el cÃ³digo...</pre>
    <button id="copyBtn" style="display:none;" onclick="copyCode()">ğŸ“‹ Copiar
      cÃ³digo</button>
    <span id="copied" class="copied">Â¡Copiado!</span>
    <a href="index.html" class="home-btn">ğŸ  Volver al inicio</a>
  </div>

  <script>
    let proportion = 0.85; // valor por defecto (85%)

    function clean(num) {
      return parseFloat(num.toFixed(3)).toString();
    }

    function generate() {
      const fontDesktop = parseFloat(document.getElementById('desktop').value);
      if (!fontDesktop || fontDesktop <= 0)
        return alert('Por favor ingresa un tamaÃ±o vÃ¡lido');

      // ğŸ“ ConfiguraciÃ³n base
      const containerMin = 350;
      const containerMax = 1400;
      const range = containerMax - containerMin;

      // ğŸ§® CÃ¡lculos con la proporciÃ³n actual
      const fontMin = fontDesktop * proportion;
      const vw = clean(((fontDesktop - fontMin) / range) * 100);
      const offsetPx = clean(fontMin - ((fontDesktop - fontMin) * (containerMin / range)));

      const toRem = n => clean(n / 16);
      const code = `clamp(${toRem(fontMin)}rem, ${toRem(offsetPx)}rem + ${vw}vw, ${toRem(fontDesktop)}rem);`;

      document.getElementById('result').textContent = code;
      document.getElementById('copyBtn').style.display = 'inline-block';
    }

    function changeProportion() {
      const newVal = prompt("Introduce el nuevo porcentaje de reducciÃ³n (por ejemplo, 80 para 80%):", proportion * 100);
      const parsed = parseFloat(newVal);
      if (!isNaN(parsed) && parsed > 0 && parsed < 100) {
        proportion = parsed / 100;
        alert(`âœ… ProporciÃ³n actualizada a ${parsed}%`);
      } else {
        alert("âš ï¸ Valor no vÃ¡lido. Debe estar entre 1 y 99.");
      }
    }

    function copyCode() {
      const text = document.getElementById('result').textContent;
      navigator.clipboard.writeText(text);
      const copied = document.getElementById('copied');
      copied.classList.add('show');
      setTimeout(() => copied.classList.remove('show'), 1500);
    }
  </script>
</body>

</html>
